<!DOCTYPE html>
<html lang="ru">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Автоматизация рутины приоритетнее давления массой">
    <meta name="author" content="Сергей Пирогов">
    <meta name="HandheldFriendly" content="True" />

    <meta property="og:site_name" content="Заметки Автоматизатора">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Избавьтесь от нестабильных тестов с VideoRecorder">
    <meta property="og:image" content="../images/blog-logo.png"/>

       <meta property="og:description" content="В этот раз хочу поделиться парой мыслей по поводу нестабильных тестов и способами борьбы с ними."/>

    <title>Заметки Автоматизатора</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/album/">
    <link href="../css/github.css" rel="stylesheet">
    <!-- Bootstrap core CSS -->
    <link href="../css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/font-awesome.min.css">
    <!-- Custom styles for this template -->
    <link href="../css/album.css" rel="stylesheet">
    <link href="../css/main.css" rel="stylesheet">

    <script>
           (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
           (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
           m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
           })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

           ga('create', 'UA-57010828-1', 'auto');
           ga('send', 'pageview');
    </script>
  <body>
<header>
      <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
        <div class='container'>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
          <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="/">Главная <span class="sr-only">(current)</span></a>
            </li>

          </ul>
          <ul class="navbar-nav">
             <li class="nav-item">
               <a class="nav-link" target=blank href="https://soundcloud.com/qaguild">Подкаст</a>
             </li>
             <li class="nav-item">
               <a class="nav-link" target=blank href="https://tttttt.me/automation_remarks">Телеграм</a>
             </li>
             <li class="nav-item">
               <a class="nav-link" href="/archive.html">Архив</a>
             </li>
          </ul>
        </div>
        </div>
      </nav>
</header>
	<div class="album py-5 bg-light">
       <div class="post-container container">
            <main class="content" role="main">
                <article class="post">
                    <div class="inner inner-post">
                        <div id="push">
                            <header class="post-header">
                                <span class="post-meta">
                                    <span class="post-author">
                                        <a href="/author/index.html">Сергей Пирогов</a>
                                    </span> |
                                    <span class="post-date">
                                        19/05/2016
                                    </span>
                                </span>
                                <div class="clear"></div>
                                <h1 class="post-title">Избавьтесь от нестабильных тестов с VideoRecorder</h1>
                            </header>

                            <section class="post-content">
                                <div class="paragraph">
<p>Привет, новая заметка немного подзадержалась, так как я готовлюсь к поездке на <a href="http://qaconf.ru/speakers.html">QA Conference</a>.</p>
</div>
<div class="paragraph">
<p>В этот раз хочу поделиться парой мыслей по поводу нестабильных тестов и способами борьбы с ними. Конкретно речь пойдет о UI тестах для WEB и Desktop приложений.</p>
</div>
<div class="paragraph">
<p>Естественно, всем хотелось бы иметь стабильные UI автотесты, которые можно запускать на любом компьютере и, тем самым, проверять работоспособность системы, но, увы, зачастую это не так. На всех конференциях автоматизаторы сходятся во мнениях о том, что нужно соблюдать баланс и сохранять структуру пирамиды автоматизации. Тем не менее, в силу каких-либо обстоятельств на многих проектах до сих пор вместо пирамиды мы можем видеть "мороженко".</p>
</div>
<div class="paragraph">
<p>Мне удается держать свои автотесты стабильными и запускать их практически в любой момент. Как такого можно добиться? Мой секрет заключается в том, что UI тесты - это, по сути, автоматизация E2E сценариев, более того, в тестах мы проверяем функциональность нашего UI. Немаловажным фактором является то, что я мастерски использую Selenide, ну и последнее - автотесты запускаются каждый день! Именно ежедневные запуски, даже на тех же сборках, позволяют мне быть уверенным, что мой тест работает стабильно и все падения вызваны изменениями или ошибками в тестируемом приложении.</p>
</div>
<div class="paragraph">
<p>Но, тем не менее, я знаю проекты или случаи (на моем прошлом проекте так было), когда было достаточно серьезное число нестабильных тестов, ситуация усугублялась еще и тем, что тестирование проводилось только в браузере Internet Explorer 8-10.</p>
</div>
<div class="paragraph">
<p>У всех на проектах есть скриншоты, которые призваны помогать выяснить причины падений тестов, но вот одна проблема - не всегда скриншоты дают ясную картину. Самая досадная вещь - когда у вас есть снимок экрана, но на нем не запечатлена ошибка, так как скриншотер сработал на секунду позже нужного момента. Как быть в этом случае? Можно принудительно делать скриншот и пытаться угадать момент падения, а можно <a href="http://automation-remarks.com/pishiem-vidieo-vo-vriemia-proghona-tiestov/">писать видео</a> нестабильного теста!</p>
</div>
<div class="paragraph">
<p>Наверное вы удивитесь, но да, зачастую это самый верный способ выявить причины нестабильности, более того, теперь писать видео ваших тестов стало очень просто, так как я решил написать библиотеку, которая позволит многим не думать о деталях реализации процесса записи, - <strong>VideoRecorder</strong>.</p>
</div>
<div class="paragraph">
<p>Что полезного даст эта библиотека?</p>
</div>
<div class="paragraph">
<p>Все очень просто - вы сможете легко записывать видео ваших автотестов, просто добавив аннотацию <strong>@Video</strong>.</p>
</div>
<div class="paragraph">
<p><strong>Пример:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@Listeners(VideoListener.class)
public class TestNGVideo {

@Test
@Video
public void testName3() throws Exception {
     open("http://ukr.net");
     $(".login &gt; input").val("Hello");
     $(".password &gt; input").val("test");
     $(".submit &gt; bu").click();
}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Вот так просто! Выполнение данного теста будет записано на видео и сохранено в нужном вам месте. На данный момент я успел реализовать интеграцию с TestNG, но в планах сделать подобное и для работы с JUnit, Spock или же любого другого тест-ранера из мира Java.</p>
</div>
<div class="paragraph">
<p>Из фишек! По умолчанию видеофайл будет иметь имя теста и записи будут сохраняться только для FAILED тестов. Вы можете легко переопределить новое имя для файла, просто указав его в параметрах аннотации:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@Test
@Video(name = "second_test")
public void testName2() throws Exception {
    open("http://ukr.net");
    $(".login &gt; input").val("User");
    $(".password &gt; input").val("User");
    $(".submit &gt; button").click();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Вот такая вот получилась штучка. Вы можете использовать это как для тестов с <strong>Selenide</strong>, так и для тестов с <strong>Winium</strong>.</p>
</div>
<div class="paragraph">
<p>Если вам интересна данная идея, напишите в комментариях свои мысли&#8230;&#8203;</p>
</div>
                            </section>

                            <footer class="post-footer">
                                   <div class="post-tags">
                                           <a class="btn btn-sm btn-outline-dark tag" href="/tags/Тест-фреймворк.html">Тест фреймворк</a>
                                           <a class="btn btn-sm btn-outline-dark tag" href="/tags/Java.html">Java</a>
                                   </div>

                            </footer>

                            <div class="sidebar-social">
                                <h5>Подпишись:</h5>
                                <ul>
                                <li>
                                <a href="https://tttttt.me/automation_remarks" title="Telegram" target="_blank" rel="nofollow">
                                  <i class="fa fa-telegram" aria-hidden="true"></i>
                                  <span>Telegram</span>
                                </a>
                                </li>

                                <li>
                                <a href="https://soundcloud.com/qaguild" title="Podcast" target="_blank" rel="nofollow">
                                  <i class="fa fa-podcast" aria-hidden="true"></i>
                                  <span>Подкаст</span>
                                </a>
                                </li>

                                <li>
                                <a href="https://www.youtube.com/channel/UCHtyBZ2XbtsRmNiAxh48RGg?view_as=subscriber" title="Youtube" target="_blank" rel="nofollow">
                                <i class="fa fa-youtube-play" aria-hidden="true"></i>
                                  <span>Youtube</span>
                                </a>
                                </li>
                            </div>




                            <div class="row">
                                  <div class="col-md-12">
                                        <div class='related-posts-holder'>
                                             <h2 class="related-posts-header">Похожие заметки:</h2>

                                                 <div class="card-deck">
                                                        <div class="card bg-light mb-3">
                                                            <div class="card-body d-flex flex-column">
                                                              <p class="card-text">
                                                                      <small class="text-muted"><span class="post-date">22 April 2020</span></small>
                                                              </p>
                                                              <h5 class="card-title"><a href="/2020/qaguild-live26/index.html">QAGuild live #26: Selenium UI Automation плагин в Idea для тестировщика</a></h5>

                                                              <hr>

                                                              <p class="card-text">
                                                                   Обзор на Selenium UI Automation плагин в Idea
                                                              </p>

                                                              <a href="/2020/qaguild-live26/index.html" class="mt-auto card-link">
                                                                Читать<i class="fa fa-chevron-right ml-1"></i>
                                                              </a>
                                                            </div>
                                                        </div>
                                                        <div class="card bg-light mb-3">
                                                            <div class="card-body d-flex flex-column">
                                                              <p class="card-text">
                                                                      <small class="text-muted"><span class="post-date">21 April 2020</span></small>
                                                              </p>
                                                              <h5 class="card-title"><a href="/2020/qaguild-s03e06/index.html">QAGuild S03E06: Про работу тестировщиков из дома</a></h5>

                                                              <hr>

                                                              <p class="card-text">
                                                                   Подкаст про работу из дома
                                                              </p>

                                                              <a href="/2020/qaguild-s03e06/index.html" class="mt-auto card-link">
                                                                Читать<i class="fa fa-chevron-right ml-1"></i>
                                                              </a>
                                                            </div>
                                                        </div>
                                                        <div class="card bg-light mb-3">
                                                            <div class="card-body d-flex flex-column">
                                                              <p class="card-text">
                                                                      <small class="text-muted"><span class="post-date">18 April 2020</span></small>
                                                              </p>
                                                              <h5 class="card-title"><a href="/2020/qaguild-live27/index.html">QAGuild live #27: Selenide на Kotlin для тестирования UI</a></h5>

                                                              <hr>

                                                              <p class="card-text">
                                                                   Selenide на Kotlin для тестирования UI
                                                              </p>

                                                              <a href="/2020/qaguild-live27/index.html" class="mt-auto card-link">
                                                                Читать<i class="fa fa-chevron-right ml-1"></i>
                                                              </a>
                                                            </div>
                                                        </div>
                                                        <div class="card bg-light mb-3">
                                                            <div class="card-body d-flex flex-column">
                                                              <p class="card-text">
                                                                      <small class="text-muted"><span class="post-date">10 April 2020</span></small>
                                                              </p>
                                                              <h5 class="card-title"><a href="/2020/qadof/index.html">Online QA BOF для тестировщиков</a></h5>

                                                              <hr>

                                                              <p class="card-text">
                                                                   QA BOF
                                                              </p>

                                                              <a href="/2020/qadof/index.html" class="mt-auto card-link">
                                                                Читать<i class="fa fa-chevron-right ml-1"></i>
                                                              </a>
                                                            </div>
                                                        </div>
                                                 </div>
                                         </div>
                                  </div>
                                  <div class="col-md-6">

                                  </div>
                            </div>
                        </div>
                    </div>
                </article>
            </main>
       </div>
    </div>
    <footer class="text-muted page-footer">
      <div class="container">

      </div>
    </footer>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../js/jquery-3.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
    <script src="../js/popper.js"></script>
    <script src="../js/bootstrap.js"></script>
    <script src="../js/holder.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="https://w.soundcloud.com/player/api.js"></script>
    <script src="../js/script.js"></script>
    <script src="https://use.fontawesome.com/e0e0cff5da.js"></script>
    </body>
</html>