<!DOCTYPE html>
<html lang="ru">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Автоматизация рутины приоритетнее давления массой">
    <meta name="author" content="Сергей Пирогов">
    <meta name="HandheldFriendly" content="True" />

    <meta property="og:site_name" content="Заметки Автоматизатора">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Блеск и нищета Report Portal">
    <meta property="og:image" content="../../images/blog-logo.png"/>

       <meta property="og:description" content="Об опенсорс проекте Report Portal"/>
    <link rel="shortcut icon" href="../../images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="../../images/favicon.ico" type="image/x-icon">

    <title>Заметки Автоматизатора</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/album/">
    <link href="../../css/github.css" rel="stylesheet">
    <!-- Bootstrap core CSS -->
    <link href="../../css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Custom styles for this template -->
    <link href="../../css/album.css" rel="stylesheet">
    <link href="../../css/main.css" rel="stylesheet">

    <script>
           (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
           (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
           m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
           })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

           ga('create', 'UA-57010828-1', 'auto');
           ga('send', 'pageview');
    </script>
  <body>
<header>
      <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
        <div class='container'>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
          <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="/">Главная <span class="sr-only">(current)</span></a>
            </li>

          </ul>
          <ul class="navbar-nav">
             <li class="nav-item">
               <a class="nav-link" target=blank href="https://soundcloud.com/qaguild">Подкаст</a>
             </li>
             <li class="nav-item">
               <a class="nav-link" target=blank href="https://tttttt.me/automation_remarks">Телеграм</a>
             </li>
             <li class="nav-item">
               <a class="nav-link" href="/archive.html">Архив</a>
             </li>
          </ul>
        </div>
        </div>
      </nav>
</header>
	<div class="album py-5 bg-light">
       <div class="post-container container">
            <main class="content" role="main">
                <article class="post">
                    <div class="inner inner-post">
                        <div id="push">
                            <header class="post-header">
                                <span class="post-meta">
                                    <span class="post-author">
                                        <a href="/author/index.html">Сергей Пирогов</a>
                                    </span> |
                                    <span class="post-date">
                                        01/05/2017
                                    </span>
                                </span>
                                <div class="clear"></div>
                                <h1 class="post-title">Блеск и нищета Report Portal</h1>
                            </header>

                            <section class="post-content">
                                <div class="paragraph">
<p>В этой заметке я опишу свои впечатления от использования <a href="https://rp.epam.com/ui/">Report Portal</a> - опенсорс проекта, который призван облегчить жизнь автоматизаторов.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://dev.by/ckeditor_assets/pictures/22979/content_rp_plate.png" alt="content rp plate">
</div>
</div>
<div class="paragraph">
<p>Что такое репорт портал?</p>
</div>
<div class="paragraph">
<p>Смотрим, что говорят разработчики в <a href="http://reportportal.io/#documentation">документации</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>Report Portal is a service, it provides great capabilities for speeding up results
analysis and reporting by means of built-in analytical features.
Report Portal is the great addition to the
Continuous Integration and Continuous Testing process.
It seamlessly integrates with mainstream platforms such as Jenkins, Jira,
BDD process, majority of Functional and Unit testing frameworks.
Real-time integration allows to manage and track execution status directly from Report Portal.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Сервис, который ускоряет анализ результатов прогона автоматических тестов и предоставляет возможность репортинга. Звучит достаточно полезно.
Может интегрироваться со всеми мейнстримными тулами и xUnit фреймворками - тоже многообещающе.</p>
</div>
<div class="paragraph">
<p>Зачем я вообще на него смотрел?</p>
</div>
<div class="paragraph">
<p>О репорт портале я слышал еще до того, как это стало мейнстримом. В сентябре 2016 года я пробовал запустить одну из первых версий, вышедных в open-source.
Тогда мне не понравилось то, что портал потребляет очень много ресурсов (&gt;8GB RAM), да и интеграция с TestNG и Junit не выглядела так легко. Тогда я потратил примерно час,
чтобы все поднять.</p>
</div>
<div class="paragraph">
<p>Прошло уже прилично времени, вышла версия 3.0.0 и я, как технический лидер проекта, хотел выяснить, чем конкретно Report Portal может помочь нам, насколько сложно его поставить
и сколько времени нужно потратить на интеграцию.</p>
</div>
<div class="paragraph">
<p>Что из этого получилось? Давайте смотреть.</p>
</div>
<div class="paragraph">
<p><em>Установка:</em></p>
</div>
<div class="paragraph">
<p>Здесь все достаточно неплохо.</p>
</div>
<div class="paragraph">
<p>Берем докер, делаем <code>docker-compose up</code>, ждем пару минут и сервис благополучно поднимается. Это, конечно, большой плюс. По этому пункту замечаний нет.</p>
</div>
<div class="paragraph">
<p><em>Интеграция с xUnit фреймворками:</em></p>
</div>
<div class="paragraph">
<p>Сначала я решил подключить портал к одному из проектов, написанных на Python + Pytest. В официальном репозитории есть соответсутвующий
<a href="https://github.com/reportportal/agent-python-pytest">агент</a>, в котором сказано сделать следующее:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>pip install pytest-reportportal</code></pre>
</div>
</div>
<div class="paragraph">
<p>Не взлетело - завел <a href="https://github.com/reportportal/agent-python-pytest/issues/3">баг</a>. Такое поведение сразу отталкивает, но так как желание попробовать было выше обычного,
я поставил его через Github:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>pip install git+https://github.com/reportportal/agent-python-pytest.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>Дальше нужно создать <code>pytest.ini</code> файл:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>[pytest]
mandatory fields
rp_uuid = uid reportportal
rp_endpoint = http://ip:port
rp_project = Project of ReportPortal</code></pre>
</div>
</div>
<div class="paragraph">
<p>Вот тут у меня есть замечание: в документации "очень мелким шрифтом" прописано, куда нужно пойти и взять эти вот значения.
Это указано в документации к модулю для TestNG. Такой вот момент.</p>
</div>
<div class="paragraph">
<p>Ну да ладно, давайте попробуем запустить тесты:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>py.test ./tests --rp-launch selene_blog_test</code></pre>
</div>
</div>
<div class="paragraph">
<p>Все классно: тесты пробегают, в портале создаются соответствующие записи.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/pytest_rp.png" alt="pytest rp">
</div>
</div>
<div class="paragraph">
<p>Однако, есть досадные минусы, которые пока что делают интеграцию портала с pytest практически бессмысленным занятием. Для упавших тестов нету ни стектрейса, ни причины падения.
И это расходится со словами "provides great capabilities for speeding up results analysis".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/pytest_rp_no_trace.png" alt="pytest rp no trace">
</div>
</div>
<div class="paragraph">
<p>Я честно пытался понять, как их туда запихнуть. Про логи есть, а вот про такую стандартную вещь, как стектрейс, нету. Я уже не говорю о скриншотах.
<strong>Allure умеет собирать такую информацию без лишних приседаний.</strong></p>
</div>
<div class="paragraph">
<p><strong>Мой вывод:</strong> пока что Report Portal для пайтон проектов бесполезен по причинам, указанным выше.
Имея <strong>Jenkins</strong> и <strong>Allure</strong>, мы получаем всю нужную информацию без каких-либо накладных расходов.</p>
</div>
<div class="paragraph">
<p>Затем я решил настроить Report Portal + TestNG.</p>
</div>
<div class="paragraph">
<p>Весь процесс занял у меня 30 минут. В документации нету примера интеграции для проектов на <strong>Gradle</strong>. Из-за этого мне пришлось потратить определенное время на то, чтобы разобраться.</p>
</div>
<div class="paragraph">
<p>Ниже описание <code>build.gradle</code> файла с настройками:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>apply plugin: 'java'

repositories {
    jcenter()
    maven {
        url  "http://dl.bintray.com/epam/reportportal"
    }
}

dependencies {
    compile 'com.epam.reportportal:agent-java-testng:3.0.0'
    compile 'com.epam.reportportal:logger-java-logback:2.6.0'
    compile 'com.epam.reportportal:logger-java-log4j:2.6.1'
    compile group: 'org.testng', name: 'testng', version: '6.11'
}

test {
    useTestNG()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>В целом с TestNG все обстоит в разы лучше. Здесь и логи собираются, и стектрейсы. Однако, в документации не хватает явного примера крепления скриншотов для упавших тестов.
За Java часть можно поставить зачет.</p>
</div>
<div class="paragraph">
<p><em>Из хорошего:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Портал работает достаточно шустро;</p>
</li>
<li>
<p>Красивый интерфейс;</p>
</li>
<li>
<p>Есть возможность настроить информативные графики и фильтры.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Что имеем в итоге:</em></p>
</div>
<div class="paragraph">
<p>Шероховатости заметны. Да, это опенсорс, но все же хотелось бы иметь plug&amp;play. Когда смотришь на презентации и скринкасты, все
выглядит, как новый майбах&#8230;&#8203; но салон местами как у новой девятки =) На данный момент более предпочтительной я считаю связку <code>Jenkins + Allure</code>. Степень красивости,
возможно, ниже, но информативность и легковесность выше.</p>
</div>
<div class="paragraph">
<p>Киллер-фичей Report Portal является алгоритм, который умеет автоматически анализировать результаты фейлов
и маркать их как баг/ не баг. Секунду! Allure умеет это делать еще с первых дней. Более того, для правильно построенной системы автоматизации время на разбор занимает пару минут, так
как на своих проектах я предпочитаю принцип <code>Zero failed tests</code>. У нас не очень большой проект: суммарный объем тестов, которые пишут автоматизаторы, до 200. Мы стараемся всегда держать тесты зелеными и любой фейл становится причиной разбирательств.
Именно поэтому такая штука, как репорт портал, нам не нужна.</p>
</div>
<div class="paragraph">
<p><em>Кому может пригодиться Report Portal?</em></p>
</div>
<div class="paragraph">
<p>Я думаю, что такую штуку нужно внедрять на проектах с оооочень большим объемом тестов и огромными командами,
которые ковыряются в упавших тестах и тратят много времени на стабилизацию.</p>
</div>
<div class="paragraph">
<p>Вот такие впечатления от Report Portal. Если вы уже успели его попробовать или успешно внедрили, пишите в комментариях - будем обсуждать и давать фидбек разработчикам. Ведь
опенсорс успешным делает только комьюнити.
В следующий раз в вам расскажу об инструменте <strong>Selenoid</strong>, но это уже будет совсем другая история. Па-па =)</p>
</div>
                            </section>

                            <footer class="post-footer">
                                   <div class="post-tags">
                                           <a class="btn btn-sm btn-outline-dark tag" href="/tags/Java.html">Java</a>
                                   </div>

                            </footer>

                            <div class="row pl-3 pr-3 training-banner-container">
                                                                    <div class="col text-center pb-3 pt-2 training-banner">
                                                                        <a href="/trainings">Доступные тренинги по автоматизации тестирования: Java API, Java UI, Python API, Jenkins CI</a>
                                                                    </div>
                                                        </div>

                            <div class="sidebar-social">
                                <h5>Подпишись:</h5>
                                <ul>
                                <li>
                                <a href="https://tttttt.me/automation_remarks" title="Telegram" target="_blank" rel="nofollow">
                                  <i class="fa fa-telegram" aria-hidden="true"></i>
                                  <span>Telegram</span>
                                </a>
                                </li>

                                <li>
                                <a href="https://soundcloud.com/qaguild" title="Podcast" target="_blank" rel="nofollow">
                                  <i class="fa fa-podcast" aria-hidden="true"></i>
                                  <span>Подкаст</span>
                                </a>
                                </li>

                                <li>
                                <a href="https://www.youtube.com/channel/UCHtyBZ2XbtsRmNiAxh48RGg?view_as=subscriber" title="Youtube" target="_blank" rel="nofollow">
                                <i class="fa fa-youtube-play" aria-hidden="true"></i>
                                  <span>Youtube</span>
                                </a>
                                </li>

                                <li>
                                   <a href="https://donatesystem.io/donate/automation_remarks" title="Поддержать" target="_blank" rel="9nofollow">
                                   <i class="fa fa-money" aria-hidden="true"></i>
                                      <span>Поддержать</span>
                                   </a>
                                </li>


                            </div>




                            <div class="row">
                                  <div class="col-md-12">
                                        <div class='related-posts-holder'>
                                             <h2 class="related-posts-header">Похожие заметки:</h2>

                                                 <div class="card-deck">
                                                        <div class="card bg-light mb-3">
                                                            <div class="card-body d-flex flex-column">
                                                              <p class="card-text">
                                                                      <small class="text-muted"><span class="post-date">27 April 2020</span></small>
                                                              </p>
                                                              <h5 class="card-title"><a href="/2020/qaguild-s03e07/index.html">QAGuild S03E07: Про DevSecOps с Барухом Садогурским</a></h5>

                                                              <hr>

                                                              <p class="card-text">
                                                                   Подкаст про DevSecOps
                                                              </p>

                                                              <a href="/2020/qaguild-s03e07/index.html" class="mt-auto card-link">
                                                                Читать<i class="fa fa-chevron-right ml-1"></i>
                                                              </a>
                                                            </div>
                                                        </div>
                                                        <div class="card bg-light mb-3">
                                                            <div class="card-body d-flex flex-column">
                                                              <p class="card-text">
                                                                      <small class="text-muted"><span class="post-date">22 April 2020</span></small>
                                                              </p>
                                                              <h5 class="card-title"><a href="/2020/qaguild-live26/index.html">QAGuild live #26: Selenium UI Automation плагин в Idea для тестировщика</a></h5>

                                                              <hr>

                                                              <p class="card-text">
                                                                   Обзор на Selenium UI Automation плагин в Idea
                                                              </p>

                                                              <a href="/2020/qaguild-live26/index.html" class="mt-auto card-link">
                                                                Читать<i class="fa fa-chevron-right ml-1"></i>
                                                              </a>
                                                            </div>
                                                        </div>
                                                        <div class="card bg-light mb-3">
                                                            <div class="card-body d-flex flex-column">
                                                              <p class="card-text">
                                                                      <small class="text-muted"><span class="post-date">21 April 2020</span></small>
                                                              </p>
                                                              <h5 class="card-title"><a href="/2020/qaguild-s03e06/index.html">QAGuild S03E06: Про работу тестировщиков из дома</a></h5>

                                                              <hr>

                                                              <p class="card-text">
                                                                   Подкаст про работу из дома
                                                              </p>

                                                              <a href="/2020/qaguild-s03e06/index.html" class="mt-auto card-link">
                                                                Читать<i class="fa fa-chevron-right ml-1"></i>
                                                              </a>
                                                            </div>
                                                        </div>
                                                        <div class="card bg-light mb-3">
                                                            <div class="card-body d-flex flex-column">
                                                              <p class="card-text">
                                                                      <small class="text-muted"><span class="post-date">18 April 2020</span></small>
                                                              </p>
                                                              <h5 class="card-title"><a href="/2020/qaguild-live27/index.html">QAGuild live #27: Selenide на Kotlin для тестирования UI</a></h5>

                                                              <hr>

                                                              <p class="card-text">
                                                                   Selenide на Kotlin для тестирования UI
                                                              </p>

                                                              <a href="/2020/qaguild-live27/index.html" class="mt-auto card-link">
                                                                Читать<i class="fa fa-chevron-right ml-1"></i>
                                                              </a>
                                                            </div>
                                                        </div>
                                                 </div>
                                         </div>
                                  </div>
                                  <div class="col-md-6">

                                  </div>
                            </div>
                        </div>
                    </div>
                </article>
            </main>
       </div>
    </div>
    <footer class="text-muted page-footer fixed-bottom">
      <div class="container">

      </div>
    </footer>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../../js/jquery-3.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
    <script src="../../js/popper.js"></script>
    <script src="../../js/bootstrap.js"></script>
    <script src="../../js/holder.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="https://w.soundcloud.com/player/api.js"></script>
    <script src="../../js/script.js"></script>
    <script src="https://use.fontawesome.com/e0e0cff5da.js"></script>
    <script async src="https://cse.google.com/cse.js?cx=005666829887305506139:i4vgkrjldvk"></script>
    </body>
</html>